<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WhereTo | Jeepney Route Finder</title>
  <link rel="icon" href="/WTFavicon.png" type="image/png">
  <link rel="stylesheet" href="destination.css" />
</head>
<body>
<!-- ===== HEADER ===== -->
<header>
  <div class="header-left">
    <img src="compass.PNG" alt="Compass" class="icon logo-icon" />
    <img src="Logo.PNG" alt="WhereTo Logo" class="logo" />
  </div>

  <div class="header-right">
    <div class="nav-icon" title="Live Map">
      <img src="map.png" alt="Live Map" onclick="window.location.href='/LiveMap'" />
    </div>
    <div class="nav-icon" title="Report Issue">
      <img src="report.png" alt="Report" onclick="window.location.href='/report'" />
    </div>
    <div class="nav-icon" title="Notifications">
      <img src="notification.png" alt="Notifications" onclick="window.location.href='/notification'" />
    </div>
    <div class="nav-icon" title="Profile">
      <img src="profile.png" alt="Profile" onclick="window.location.href='/profile'" />
    </div>
  </div>
</header>


  <!-- ===== MAIN SECTION (Hero Section) ===== -->
  <section class="hero">
    <div class="overlay">
      <h2>Plan your trip</h2>
      <div class="trip-form">
        <div class="input-group">
          <label for="from">From</label>
          <input type="text" id="from" placeholder="Enter starting point">
        </div>
        <div class="input-group">
          <label for="to">To</label>
          <input type="text" id="to" placeholder="Enter destination">
        </div>
        <button id="searchBtn" class="search-btn" >Search Routes</button>
      </div>
    </div>
  </section>

  <div class="buttons-row">
  <button class="info-btn" onclick="window.location.href='/LiveMap'">
  <img src="map.png" alt="Routes" />
  <span>Live Map</span>
</button>

  <button class="info-btn" onclick="window.location.href='/report'">
    <img src="report.png" alt="Report" />
    <span>Report Issue</span>
  </button>
</div>

    <div class="big-box">
      <h1>Recent Searches</h1>
      <div class="small-box recent-search" data-from="Downtown" data-to="Market">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Route 1: Downtown to Market</span>
        <img src="favorites.png" alt="Jeep Right" class="small-icon right">
      </div>

      <div class="small-box recent-search" data-from="City Hall" data-to="Terminal">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Route 2: City Hall to Terminal</span>
        <img src="favorites.png" alt="Jeep Right" class="small-icon right">
      </div>

      <div class="small-box recent-search" data-from="North Point" data-to="Bay Area">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Route 3: North Point to Bay Area</span>
        <img src="favorites.png" alt="Jeep Right" class="small-icon right">
      </div>
    </div>

<!-- Floating Notifications -->
  <div id="floatingNotifications" class="floating-notifications" aria-live="polite">
    <div class="fn-header">
      <span class="fn-title">Alerts</span>
      <button id="fnToggle" class="fn-toggle" aria-label="Minimize">–</button>
    </div>
    <ul id="fnList" class="fn-list"></ul>
  </div>

  <style>
    .floating-notifications { position: fixed; right: 20px; bottom: 20px; width: 320px; max-width: calc(100% - 40px); background: #fff; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); z-index: 9999; font-family: Poppins, Arial, sans-serif; }
    .fn-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid rgba(0,0,0,0.06); }
    .fn-title { font-weight: 600; color: #0a3d62; }
    .fn-toggle { background: transparent; border: none; font-size: 20px; line-height: 1; cursor: pointer; color: #0a3d62; padding: 4px 8px; border-radius: 8px; }
    .fn-toggle:hover { background: rgba(10,61,98,0.08); }
    .fn-list { list-style: none; margin: 0; padding: 8px 8px 10px 8px; max-height: 260px; overflow: auto; }
    .fn-item { display: flex; gap: 10px; align-items: flex-start; padding: 10px; border-radius: 10px; background: #f8fbff; border: 1px solid #e6f0f7; margin: 6px 0; }
    .fn-item .fn-icon { width: 16px; height: 16px; flex: 0 0 16px; margin-top: 2px; }
    .fn-item .fn-text { font-size: 12px; color: #244; line-height: 1.3; }
    .fn-hidden .fn-list { display: none; }
  </style>

  <script>
    (function() {
      const NT_KEY = 'notificationsList';
      const defaultNotifications = [
        { id: 1, title: 'Service Delay', desc: 'Heavy traffic reported near Main Ave.' },
        { id: 2, title: 'Route Change', desc: 'Jeepney route 101 has a temporary detour.' }
      ];
      try {
        if (!localStorage.getItem(NT_KEY)) {
          localStorage.setItem(NT_KEY, JSON.stringify(defaultNotifications));
        }
      } catch (e) {}
      const list = JSON.parse(localStorage.getItem(NT_KEY) || '[]');

      const fn = document.getElementById('floatingNotifications');
      const ul = document.getElementById('fnList');
      const toggle = document.getElementById('fnToggle');

      function render() {
        ul.innerHTML = '';
        list.slice(0, 5).forEach(item => {
          const li = document.createElement('li');
          li.className = 'fn-item';
          li.innerHTML =
            '<img src="notification.png" alt="" class="fn-icon" aria-hidden="true">' +
            '<div class="fn-text"><strong>' + (item.title || 'Alert') + ':</strong> ' +
            (item.desc || '') + '</div>';
          ul.appendChild(li);
        });
      }

      toggle.addEventListener('click', function() {
        fn.classList.toggle('fn-hidden');
        toggle.textContent = fn.classList.contains('fn-hidden') ? '+' : '–';
        toggle.setAttribute('aria-label', fn.classList.contains('fn-hidden') ? 'Expand' : 'Minimize');
      });

      render();
    })();
  </script>


  </section>

  <!-- JavaScript for Destination Page -->
  <script>
    const fromInput = document.getElementById('from');
    const toInput = document.getElementById('to');
    const searchBtn = document.getElementById('searchBtn');
    const recentSearches = document.querySelectorAll('.recent-search');

    // Function to validate inputs and enable/disable search button
    function validateInputs() {
      const fromValue = fromInput.value.trim();
      const toValue = toInput.value.trim();
      
      if (fromValue && toValue) {
        searchBtn.disabled = false;
        searchBtn.style.opacity = '1';
        searchBtn.style.cursor = 'pointer';
      } else {
        searchBtn.disabled = true;
        searchBtn.style.opacity = '0.5';
        searchBtn.style.cursor = 'not-allowed';
      }
    }

    // Add event listeners to input fields
    fromInput.addEventListener('input', validateInputs);
    toInput.addEventListener('input', validateInputs);

    // Add click functionality to recent searches
    recentSearches.forEach(search => {
      search.style.cursor = 'pointer';
      search.addEventListener('click', function() {
        const fromValue = this.getAttribute('data-from');
        const toValue = this.getAttribute('data-to');
        
        fromInput.value = fromValue;
        toInput.value = toValue;
        
        // Trigger validation
        validateInputs();
        
        // Add visual feedback
        this.style.backgroundColor = '#e3f2fd';
        setTimeout(() => {
          this.style.backgroundColor = 'white';
        }, 1000);
      });
      
      // Add hover effects
      search.addEventListener('mouseenter', function() {
        this.style.backgroundColor = '#f0f8ff';
        this.style.transform = 'translateY(-2px)';
        this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.15)';
      });
      
      search.addEventListener('mouseleave', function() {
        this.style.backgroundColor = 'white';
        this.style.transform = 'translateY(0)';
        this.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
      });
    });

    // Handle search button click
    searchBtn.addEventListener('click', function() {
      if (!this.disabled) {
        const fromValue = fromInput.value.trim();
        const toValue = toInput.value.trim();
        
        // Store the search in localStorage for recent searches
        const searches = JSON.parse(localStorage.getItem('recentSearches') || '[]');
        const newSearch = {
          from: fromValue,
          to: toValue,
          timestamp: new Date().toISOString()
        };
        
        // Remove duplicate if exists
        const filteredSearches = searches.filter(s => 
          !(s.from === fromValue && s.to === toValue)
        );
        
        // Add new search to the beginning
        filteredSearches.unshift(newSearch);
        
        // Keep only last 10 searches
        const recentSearches = filteredSearches.slice(0, 10);
        localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
        
        // Navigate to route page
        window.location.href = '/route';
      }
    });

    // Initialize validation on page load
    validateInputs();
  </script>
</body>
</html>