<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WhereTo | Jeepney Route Finder</title>
  <link rel="stylesheet" href="route.css" />
</head>
<body>
  <!-- ===== HEADER ===== -->
  <header>
    <div class="header-left">
      <img src="compass.PNG" alt="Compass" class="icon" />
      <img src="Logo.PNG" alt="WhereTo Logo" class="logo" />
    </div>
    <div class="header-right">
      <img src="favorites.png" alt="Help" class="icon" />
      <img src="pin.png" alt="User" class="icon" />
    </div>
  </header>


    <div class="big-box">
      <h1 id="routeTitle">Loading route...</h1>
      <p id="routeTime">Preparing your journey...</p>
      <div class="small-box">
      <button class="nav-btn" onclick="window.location.href='/nav'">
        <span>Start Navigation</span>
  </button>
      </div>
    </div>


    <div class="big-box second">
      <h1>Directions</h1>

      <div class="small-box">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Step 1.</span>
        <p id="step1">Walk to starting point...</p>
      </div>

        <div class="small-box">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Step 2.</span>
        <p id="step2">Board jeepney to destination...</p>
      </div>
    
        <div class="small-box">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Step 3.</span>
        <p id="step3">Transfer if needed...</p>
      </div>
    
        <div class="small-box">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Step 4.</span>
        <p id="step4">Continue journey...</p>
      </div>
    
        <div class="small-box">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Step 5.</span>
        <p id="step5">Arrive at destination...</p>
      </div>
    
    
    </div>

    <div class="big-box third">
      <h1>Route Alerts</h1>

      <div class="small-box">
        <img src="route.png" alt="Jeep Left" class="small-icon left">
        <span>Route tip</span>
        <p>during rush hours...</p>
      </div>
    </div> 

      <!-- ===== WHITE CONTENT AREA ===== -->
  <section class="content-section">
    <div class="buttons-row">
      <button class="info-btn" onclick="window.location.href='/LiveMap'">
  <img src="map.png" alt="Routes" />
  <span>Live Map</span>
   <div class="buttons-row">
      <button class="info-btn" onclick="window.location.href='/destination'">
  <img src="route.png" alt="alter" />
  <span>Find Alternative</span>
    </div>

  </section>

  <!-- JavaScript for Route Page -->
  <script>
    const routeTitle = document.getElementById('routeTitle');
    const routeTime = document.getElementById('routeTime');
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const step4 = document.getElementById('step4');
    const step5 = document.getElementById('step5');

    // Function to load route data from localStorage
    function loadRouteData() {
      const recentSearches = JSON.parse(localStorage.getItem('recentSearches') || '[]');
      const currentSearch = recentSearches[0]; // Get the most recent search
      
      console.log('Recent searches:', recentSearches);
      console.log('Current search:', currentSearch);
      
      if (currentSearch) {
        const fromLocation = currentSearch.from;
        const toLocation = currentSearch.to;
        
        console.log('Loading route:', fromLocation, 'to', toLocation);
        
        // Update route title and time
        routeTitle.textContent = `${fromLocation} → ${toLocation}`;
        routeTime.textContent = 'Estimated travel time: 45-60 minutes';
        
        // Update step descriptions based on locations
        step1.textContent = `Walk to ${fromLocation} starting point...`;
        step2.textContent = `Board jeepney from ${fromLocation} to ${toLocation}...`;
        step3.textContent = `Transfer at intermediate stop if needed...`;
        step4.textContent = `Continue journey towards ${toLocation}...`;
        step5.textContent = `Arrive at ${toLocation} destination...`;
      } else {
        console.log('No search data found, using default route');
        // Default route if no data found
        routeTitle.textContent = 'Divisoria → Cubao';
        routeTime.textContent = 'Estimated travel time: 45 minutes';
        step1.textContent = 'Walk to Divisoria Market...';
        step2.textContent = 'Board jeepney to Cubao...';
        step3.textContent = 'Transfer if needed...';
        step4.textContent = 'Continue journey...';
        step5.textContent = 'Arrive at Cubao...';
      }
    }

    // Initialize on page load
    loadRouteData();
  </script>
</body>
</html>