<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile | WhereTo</title>
  <link rel="stylesheet" href="profile.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #f8ebdd;
      margin: 0;
      color: #222;
    }

    /* HEADER */
    .profile-header {
      position: sticky;
      top: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #ccc;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      padding: 21px 18px;
      z-index: 10;
    }

    .profile-header h1 {
      font-size: 20px;
      font-weight: 700;
      color: #0a3d62;
      margin: 0;
      text-align: center;
      flex: 1;
    }

    .back-btn {
      background: transparent;
      border: none;
      font-size: 22px;
      color: #0a3d62;
      cursor: pointer;
    }

    /* STAR ICON STYLE */
    .community-rating .star-icon {
      color: #FFD700;
      font-size: 22px;
      vertical-align: middle;
      margin-right: 4px;
    }
  </style>
</head>
<body>
    
  <header class="profile-header">
    <button class="back-btn" aria-label="Go Back" onclick="history.back()">
      <i class="bi bi-arrow-left"></i>
    </button>
    <h1>Profile Section</h1>
    <div style="width:36px"></div>
  </header>

  <section class="main-content">
    <!-- User Profile Card -->
    <div class="profile-card">
      <div class="user-info">
        <div class="user-avatar">
          <img src="user.png" alt="User Avatar" class="avatar-img">
        </div>
        <div class="user-details">
          <h2>User</h2>
          <p>latciass....</p>
        </div>
      </div>
      <div class="community-rating">
        <i class="bi bi-star-fill star-icon"></i>
        <span class="rating">4.8</span>
        <span class="rating-text">community rating</span>
      </div>
      <div class="user-stats">
        <div class="stat-item">
          <img src="route.png" alt="Trips" class="stat-icon">
          <span class="stat-number">47</span>
          <span class="stat-label">trips taken</span>
        </div>
        <div class="stat-item">
          <img src="favorites.png" alt="Saved" class="stat-icon">
          <span class="stat-number">3</span>
          <span class="stat-label">saved routes</span>
        </div>
        <div class="stat-item">
          <img src="report.png" alt="Reports" class="stat-icon">
          <span class="stat-number">10</span>
          <span class="stat-label">reports made</span>
        </div>
      </div>
    </div>

    <!-- Edit Button -->
    <div style="text-align: center; margin: 15px 0;">
      <button class="edit-profile-btn" onclick="goToNextPage()">
        <img src="edit.png" alt="Edit" class="edit-icon">
        <span>Edit Profile</span>
      </button>
    </div>

    <!-- Preferences Section -->
    <div class="content-section preferences">
      <div class="section-header">
        <img src="settings.png" alt="Settings" class="section-icon">
        <h2>Preferences</h2>
      </div>
      <div class="preference-item">
        <div class="preference-info">
          <span class="preference-title">Push notifications</span>
          <span class="preference-desc">receive alerts and updates</span>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="notifications" checked disabled>
          <span class="slider"></span>
        </label>
      </div>
      <div class="preference-item">
        <div class="preference-info">
          <span class="preference-title">Location Tracking</span>
          <span class="preference-desc">for accurate route guidance</span>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="location" checked disabled>
          <span class="slider"></span>
        </label>
      </div>
      <div class="preference-item">
        <div class="preference-info">
          <span class="preference-title">Auto-save Routes</span>
          <span class="preference-desc">Automatically save frequently used route</span>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="autoSave" checked disabled>
          <span class="slider"></span>
        </label>
      </div>
      <div class="preference-item">
        <div class="preference-info">
          <span class="preference-title">Offline Mode</span>
          <span class="preference-desc">download routes for offline use</span>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="offline" disabled>
          <span class="slider"></span>
        </label>
      </div>
    </div>

    <!-- Saved Routes Section -->
    <div class="content-section saved-routes">
      <div class="section-header">
        <img src="favorites.png" alt="Saved" class="section-icon">
        <h2>Saved Routes</h2>
      </div>
      <div class="route-item">
        <div class="route-info">
          <img src="pin.png" alt="Location" class="route-icon">
          <div class="route-details">
            <span class="route-name">Home to Work</span>
            <span class="route-path">Divisoria → Cubao</span>
            <span class="route-last-used">last used: Today</span>
          </div>
        </div>
        <div class="route-actions">
          <button class="action-btn use-btn" disabled>use</button>
          <button class="action-btn delete-btn" disabled>delete</button>
        </div>
      </div>
      <div class="route-item">
        <div class="route-info">
          <img src="pin.png" alt="Location" class="route-icon">
          <div class="route-details">
            <span class="route-name">Shopping</span>
            <span class="route-path">Makati → Quezon City</span>
            <span class="route-last-used">last used: 2 days ago</span>
          </div>
        </div>
        <div class="route-actions">
          <button class="action-btn use-btn" disabled>use</button>
          <button class="action-btn delete-btn" disabled>delete</button>
        </div>
      </div>
    </div>

    <!-- Recent Trips Section -->
    <div class="content-section recent-trips">
      <div class="section-header">
        <img src="check.png" alt="Trips" class="section-icon">
        <h2>Recent Trips</h2>
      </div>
      <div class="trip-item">
        <div class="trip-checkbox">
          <input type="checkbox" class="trip-check" disabled>
        </div>
        <div class="trip-info">
          <span class="trip-route">Divisoria → Cubao</span>
          <span class="trip-time">Today, 8:30 am</span>
        </div>
        <div class="trip-details">
          <span class="trip-fare">P25</span>
          <span class="trip-duration">40 mins</span>
        </div>
      </div>
      <div class="trip-item">
        <div class="trip-checkbox">
          <input type="checkbox" class="trip-check" disabled>
        </div>
        <div class="trip-info">
          <span class="trip-route">Makati → Quezon City</span>
          <span class="trip-time">Yesterday, 6:15 pm</span>
        </div>
        <div class="trip-details">
          <span class="trip-fare">P30</span>
          <span class="trip-duration">1 hr 10 mins</span>
        </div>
      </div>
    </div>

    <!-- Settings Section -->
    <div class="content-section settings">
      <div class="setting-item" onclick="openSettings()">
        <img src="settings.png" alt="Settings" class="setting-icon">
        <span>Settings</span>
        <img src="right-arrow.png" alt="Arrow" class="arrow-icon">
      </div>
      <div class="setting-item sign-out" onclick="signOut()">
        <img src="logout.png" alt="Sign Out" class="setting-icon">
        <span>Sign Out</span>
        <img src="right-arrow.png" alt="Arrow" class="arrow-icon">
      </div>
    </div>
  </section>

  <script>
    function loadPreferences() {
      const preferences = JSON.parse(localStorage.getItem('userPreferences') || '{}');
      Object.keys(preferences).forEach(key => {
        const toggle = document.getElementById(key);
        if (toggle) toggle.checked = preferences[key];
      });
    }

    function useRoute(routeName) {
      console.log(`Using route: ${routeName}`);
      window.location.href = '/route';
    }

    function deleteRoute(routeName) {
      if (confirm(`Are you sure you want to delete "${routeName}"?`)) {
        console.log(`Deleting route: ${routeName}`);
        const savedRoutes = JSON.parse(localStorage.getItem('savedRoutes') || '[]');
        const updatedRoutes = savedRoutes.filter(route => route.name !== routeName);
        localStorage.setItem('savedRoutes', JSON.stringify(updatedRoutes));
        event.target.closest('.route-item').remove();
      }
    }

    function goToNextPage() {
      window.location.href = '/prof2';
    }

    function openSettings() {
      window.location.href = '/notification';
    }

    function signOut() {
      if (confirm('Are you sure you want to sign out?')) {
        localStorage.removeItem('currentUser');
        localStorage.removeItem('userPreferences');
        window.location.href = '/signin';
      }
    }

    function loadUserData() {
      const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
      if (currentUser.email) {
        const userDetails = document.querySelector('.user-details h2');
        if (userDetails) userDetails.textContent = currentUser.email.split('@')[0];
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadPreferences();
      loadUserData();
    });
  </script>

</body>
</html>h